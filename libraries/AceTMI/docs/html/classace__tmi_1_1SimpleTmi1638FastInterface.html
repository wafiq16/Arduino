<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AceTMI: ace_tmi::SimpleTmi1638FastInterface&lt; T_DIO_PIN, T_CLK_PIN, T_STB_PIN, T_DELAY_MICROS &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AceTMI
   &#160;<span id="projectnumber">0.6</span>
   </div>
   <div id="projectbrief">Interfaces for communicating with the TM1637 and TM1638 LED controllers on Arduino platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ace_tmi</b></li><li class="navelem"><a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html">SimpleTmi1638FastInterface</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classace__tmi_1_1SimpleTmi1638FastInterface-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ace_tmi::SimpleTmi1638FastInterface&lt; T_DIO_PIN, T_CLK_PIN, T_STB_PIN, T_DELAY_MICROS &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Exactly the same as <a class="el" href="classace__tmi_1_1SimpleTmi1638Interface.html" title="Class that knows how to communicate with a TM1638 chip.">SimpleTmi1638Interface</a> except that this uses the <code>digitalWriteFast</code> library on AVR processors.  
 <a href="classace__tmi_1_1SimpleTmi1638FastInterface.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="SimpleTmi1638FastInterface_8h_source.html">SimpleTmi1638FastInterface.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2171425ee0a5385bc2b6481da8420a5f"><td class="memItemLeft" align="right" valign="top"><a id="a2171425ee0a5385bc2b6481da8420a5f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html#a2171425ee0a5385bc2b6481da8420a5f">SimpleTmi1638FastInterface</a> ()=default</td></tr>
<tr class="memdesc:a2171425ee0a5385bc2b6481da8420a5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:a2171425ee0a5385bc2b6481da8420a5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523970a73c88d6e772f6cd4a35397a88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html#a523970a73c88d6e772f6cd4a35397a88">begin</a> () const</td></tr>
<tr class="memdesc:a523970a73c88d6e772f6cd4a35397a88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the DIO, CLK, and STB pins.  <a href="classace__tmi_1_1SimpleTmi1638FastInterface.html#a523970a73c88d6e772f6cd4a35397a88">More...</a><br /></td></tr>
<tr class="separator:a523970a73c88d6e772f6cd4a35397a88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af82424c1dba4f4b7126f17e938377968"><td class="memItemLeft" align="right" valign="top"><a id="af82424c1dba4f4b7126f17e938377968"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html#af82424c1dba4f4b7126f17e938377968">end</a> () const</td></tr>
<tr class="memdesc:af82424c1dba4f4b7126f17e938377968"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set pins to INPUT mode. <br /></td></tr>
<tr class="separator:af82424c1dba4f4b7126f17e938377968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14fba9929d11b5b0d5fcd397b2755e1b"><td class="memItemLeft" align="right" valign="top"><a id="a14fba9929d11b5b0d5fcd397b2755e1b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html#a14fba9929d11b5b0d5fcd397b2755e1b">beginTransaction</a> () const</td></tr>
<tr class="memdesc:a14fba9929d11b5b0d5fcd397b2755e1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate the SPI-like start condition. <br /></td></tr>
<tr class="separator:a14fba9929d11b5b0d5fcd397b2755e1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9df0ac85049f6c66e0db71cdf7bbf23"><td class="memItemLeft" align="right" valign="top"><a id="ac9df0ac85049f6c66e0db71cdf7bbf23"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html#ac9df0ac85049f6c66e0db71cdf7bbf23">endTransaction</a> () const</td></tr>
<tr class="memdesc:ac9df0ac85049f6c66e0db71cdf7bbf23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate the SPI-like stop condition. <br /></td></tr>
<tr class="separator:ac9df0ac85049f6c66e0db71cdf7bbf23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e416c29128a17060128c6404c16e90f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html#a7e416c29128a17060128c6404c16e90f">write</a> (uint8_t data) const</td></tr>
<tr class="memdesc:a7e416c29128a17060128c6404c16e90f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the data byte on the data bus, with LSB first instead of the usual MSB first for SPI.  <a href="classace__tmi_1_1SimpleTmi1638FastInterface.html#a7e416c29128a17060128c6404c16e90f">More...</a><br /></td></tr>
<tr class="separator:a7e416c29128a17060128c6404c16e90f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad953fdef70270daf8581da866bbf491a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html#ad953fdef70270daf8581da866bbf491a">read</a> () const</td></tr>
<tr class="memdesc:ad953fdef70270daf8581da866bbf491a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the data byte on the data bus, with LSB first instead of the usual MSB first for SPI.  <a href="classace__tmi_1_1SimpleTmi1638FastInterface.html#ad953fdef70270daf8581da866bbf491a">More...</a><br /></td></tr>
<tr class="separator:ad953fdef70270daf8581da866bbf491a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c082360de04230c6b527c82fa8b04f4"><td class="memItemLeft" align="right" valign="top"><a id="a2c082360de04230c6b527c82fa8b04f4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SimpleTmi1638FastInterface</b> (const <a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html">SimpleTmi1638FastInterface</a> &amp;)=default</td></tr>
<tr class="separator:a2c082360de04230c6b527c82fa8b04f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a97f87f1540c3bad95af9161c1b63ac"><td class="memItemLeft" align="right" valign="top"><a id="a8a97f87f1540c3bad95af9161c1b63ac"></a>
<a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html">SimpleTmi1638FastInterface</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html">SimpleTmi1638FastInterface</a> &amp;)=default</td></tr>
<tr class="separator:a8a97f87f1540c3bad95af9161c1b63ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;uint8_t T_DIO_PIN, uint8_t T_CLK_PIN, uint8_t T_STB_PIN, uint8_t T_DELAY_MICROS&gt;<br />
class ace_tmi::SimpleTmi1638FastInterface&lt; T_DIO_PIN, T_CLK_PIN, T_STB_PIN, T_DELAY_MICROS &gt;</h3>

<p>Exactly the same as <a class="el" href="classace__tmi_1_1SimpleTmi1638Interface.html" title="Class that knows how to communicate with a TM1638 chip.">SimpleTmi1638Interface</a> except that this uses the <code>digitalWriteFast</code> library on AVR processors. </p>
<p>Normally, the digitalWriteFast library is used to get faster speeds over <code>digitalWrite()</code> and <code>pinMode()</code> functions.</p>
<p>The reason that you may want to use <code>digitalWriteFast</code> library is because it consumes far less flash memory than normal <code>digitalWrite()</code>. The benchmarks in MemoryBenchmark shows that using this <code><a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html" title="Exactly the same as SimpleTmi1638Interface except that this uses the digitalWriteFast library on AVR ...">SimpleTmi1638FastInterface</a></code> instead of <code><a class="el" href="classace__tmi_1_1SimpleTmi1638Interface.html" title="Class that knows how to communicate with a TM1638 chip.">SimpleTmi1638Interface</a></code> saves ~500 bytes of flash on an AVR processor.</p>
<p>Caution: There might be a use-case where the normal <code><a class="el" href="classace__tmi_1_1SimpleTmi1638Interface.html" title="Class that knows how to communicate with a TM1638 chip.">SimpleTmi1638Interface</a></code> might consume less flash memory. If your application uses more than one TM1638 LED Module, you will need to create multiple instances of the <code>Tm1638Module</code>. But the pin numbers of this class must be a compile-time constants, so different pins means that a different template class is generated. Since the <code>Tm1638Module</code> class takes a <code><a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html" title="Exactly the same as SimpleTmi1638Interface except that this uses the digitalWriteFast library on AVR ...">SimpleTmi1638FastInterface</a></code> as a template argument, each LED Module generate a new template instance of the <code>Tm1638Module</code> class.</p>
<p>When there are more than some number of TM1638 LED modules, it may actually be more efficient to use the non-fast <code><a class="el" href="classace__tmi_1_1SimpleTmi1638Interface.html" title="Class that knows how to communicate with a TM1638 chip.">SimpleTmi1638Interface</a></code>, because you will generate only a single template instantiation. I have not currently done any experiments to see where the break-even point would be.</p>
<p>The <code>delayMicroseconds()</code> may not be accurate for small values on some processors (e.g. AVR) . The actual minimum value of T_DELAY_MICROS will depend on the capacitance and resistance on the DIO and CLK lines, and the accuracy of the <code>delayMicroseconds()</code> function.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T_DIO_PIN</td><td>pin attached to the DIO data line </td></tr>
    <tr><td class="paramname">T_CLK_PIN</td><td>pin attached to the CLK clock line </td></tr>
    <tr><td class="paramname">T_STB_PIN</td><td>pin attached to the STB strobe line </td></tr>
    <tr><td class="paramname">T_DELAY_MICROS</td><td>delay after each bit transition of DIO or CLK </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="SimpleTmi1638FastInterface_8h_source.html#l00074">74</a> of file <a class="el" href="SimpleTmi1638FastInterface_8h_source.html">SimpleTmi1638FastInterface.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a523970a73c88d6e772f6cd4a35397a88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a523970a73c88d6e772f6cd4a35397a88">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t T_DIO_PIN, uint8_t T_CLK_PIN, uint8_t T_STB_PIN, uint8_t T_DELAY_MICROS&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html">ace_tmi::SimpleTmi1638FastInterface</a>&lt; T_DIO_PIN, T_CLK_PIN, T_STB_PIN, T_DELAY_MICROS &gt;::begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the DIO, CLK, and STB pins. </p>
<p>DIO is an open-drain line with pull-up resistors. We must not drive them HIGH actively since that could damage the transitor at the other end of the line pulling LOW. Instead, we go into INPUT mode to let the line to HIGH through the pullup resistor, then go to OUTPUT mode only to pull down. </p>

<p class="definition">Definition at line <a class="el" href="SimpleTmi1638FastInterface_8h_source.html#l00088">88</a> of file <a class="el" href="SimpleTmi1638FastInterface_8h_source.html">SimpleTmi1638FastInterface.h</a>.</p>

</div>
</div>
<a id="ad953fdef70270daf8581da866bbf491a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad953fdef70270daf8581da866bbf491a">&#9670;&nbsp;</a></span>read()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t T_DIO_PIN, uint8_t T_CLK_PIN, uint8_t T_STB_PIN, uint8_t T_DELAY_MICROS&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html">ace_tmi::SimpleTmi1638FastInterface</a>&lt; T_DIO_PIN, T_CLK_PIN, T_STB_PIN, T_DELAY_MICROS &gt;::read </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the data byte on the data bus, with LSB first instead of the usual MSB first for SPI. </p>
<p>This loop generates slightly asymmetric logic signals because clockLow() lasts for 2*bitDelay(), but clockHigh() lasts for only 1*bitDelay(). This does not seem to cause any problems with the LED modules that I have tested.</p>
<dl class="section return"><dt>Returns</dt><dd>the data byte </dd></dl>

<p class="definition">Definition at line <a class="el" href="SimpleTmi1638FastInterface_8h_source.html#l00159">159</a> of file <a class="el" href="SimpleTmi1638FastInterface_8h_source.html">SimpleTmi1638FastInterface.h</a>.</p>

</div>
</div>
<a id="a7e416c29128a17060128c6404c16e90f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e416c29128a17060128c6404c16e90f">&#9670;&nbsp;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t T_DIO_PIN, uint8_t T_CLK_PIN, uint8_t T_STB_PIN, uint8_t T_DELAY_MICROS&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classace__tmi_1_1SimpleTmi1638FastInterface.html">ace_tmi::SimpleTmi1638FastInterface</a>&lt; T_DIO_PIN, T_CLK_PIN, T_STB_PIN, T_DELAY_MICROS &gt;::write </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send the data byte on the data bus, with LSB first instead of the usual MSB first for SPI. </p>
<p>This loop generates slightly asymmetric logic signals because clockLow() lasts for 2*bitDelay(), but clockHigh() lasts for only 1*bitDelay(). This does not seem to cause any problems with the LED modules that I have tested. </p>

<p class="definition">Definition at line <a class="el" href="SimpleTmi1638FastInterface_8h_source.html#l00126">126</a> of file <a class="el" href="SimpleTmi1638FastInterface_8h_source.html">SimpleTmi1638FastInterface.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/brian/src/AceTMI/src/ace_tmi/<a class="el" href="SimpleTmi1638FastInterface_8h_source.html">SimpleTmi1638FastInterface.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
